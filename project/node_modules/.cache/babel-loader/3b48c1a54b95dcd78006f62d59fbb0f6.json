{"ast":null,"code":"//import data from \"./resources/bikes.json\";\n//var bikes = data; //TODO: Update json file periodically to make backup.\nvar bikes = require('./resources/bikes.json');\n\nvar myId = 6;\n\nfunction endPointsToArray(startDate, endDate) {\n  var dateArray = [];\n  var currentDate = new Date(startDate); //Put all dates between startDate and endDate in an array.\n\n  while (currentDate <= endDate) {\n    dateArray.push(DateToString(new Date(currentDate)));\n    currentDate = currentDate.addDays(1);\n  }\n\n  return dateArray;\n}\n\nexport function getBike(id) {\n  return bikes[id];\n}\n/* Returns all bikes */\n\nexport function getAllBikes() {\n  return bikes;\n}\n/* Function that adds another bike to the json file */\n\nexport function addBike(name, lat, long, frame, type, gears, price, startDate, endDate, description) {\n  var newBike = {\n    name: name,\n    lat: lat,\n    long: long,\n    frame: frame,\n    type: type,\n    gears: gears,\n    price: price,\n    dates: endPointsToArray(startDate, endDate),\n    description: description\n  };\n  bikes[myId] = newBike;\n  console.log(bikes[myId]); //console.log(bikes);\n  //TODO: bikes ska skicka till JSON-filen\n\n  myId = myId + 1;\n}\n/* Removes the rented days from the bike specified by id*/\n\nexport function rentBike(id, startDate, endDate) {\n  //Adds all dates in range to an array\n  var dateArray = endPointsToArray(startDate, endDate); //If all dates are not available for the bike, return false.\n  //TODO: alert user on return false.\n\n  dateArray.forEach(function (element) {\n    if (!bikes[id].dates.includes(element)) {\n      return false;\n    }\n  }); //Make the dates unavailable for the bike.\n\n  dateArray.forEach(function (element) {\n    if (bikes[id].dates.includes(element)) {\n      var index = bikes[id].dates.indexOf(element);\n      bikes[id].dates.splice(index, 1);\n    }\n  });\n  return true;\n}\n\nfunction DateToString(date) {\n  return date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\n}\n/* Returns a new Date object for a specified number of days after the current date. */\n\n\nDate.prototype.addDays = function (days) {\n  var date = new Date(this.valueOf());\n  date.setDate(date.getDate() + days);\n  return date;\n};","map":{"version":3,"sources":["C:\\Users\\Ivan\\Desktop\\Ivan. Work\\IT project\\tangela\\project\\src\\BikeHandler.js"],"names":["bikes","require","myId","endPointsToArray","startDate","endDate","dateArray","currentDate","Date","push","DateToString","addDays","getBike","id","getAllBikes","addBike","name","lat","long","frame","type","gears","price","description","newBike","dates","console","log","rentBike","forEach","element","includes","index","indexOf","splice","date","getFullYear","getMonth","getDate","prototype","days","valueOf","setDate"],"mappings":"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","sourcesContent":["//import data from \"./resources/bikes.json\";\r\n//var bikes = data; //TODO: Update json file periodically to make backup.\r\nvar bikes = require('./resources/bikes.json');\r\nvar myId=6;\r\n\r\nfunction endPointsToArray(startDate, endDate) {\r\n  var dateArray = [];\r\n  var currentDate = new Date(startDate);\r\n\r\n  //Put all dates between startDate and endDate in an array.\r\n  while (currentDate <= endDate) {\r\n    dateArray.push(DateToString(new Date(currentDate)));\r\n    currentDate = currentDate.addDays(1);\r\n  }\r\n  return dateArray;\r\n}\r\n\r\nexport function getBike(id) {\r\n  return bikes[id];\r\n}\r\n\r\n/* Returns all bikes */\r\nexport function getAllBikes() {\r\n  return bikes;\r\n}\r\n\r\n/* Function that adds another bike to the json file */\r\nexport function addBike(name, lat, long, frame, type, gears, price, startDate, endDate, description) {\r\n    var newBike= ({name:name, lat:lat, long:long, frame:frame, type:type, gears:gears, price:price, dates:endPointsToArray(startDate, endDate), description:description });\r\n\r\n  bikes[myId] = newBike;\r\n  console.log(bikes[myId]);\r\n  //console.log(bikes);\r\n  //TODO: bikes ska skicka till JSON-filen\r\n  myId=myId+1;\r\n}\r\n\r\n/* Removes the rented days from the bike specified by id*/\r\nexport function rentBike(id, startDate, endDate) {\r\n  \r\n  //Adds all dates in range to an array\r\n  var dateArray = endPointsToArray(startDate, endDate);\r\n \r\n  //If all dates are not available for the bike, return false.\r\n  //TODO: alert user on return false.\r\n  dateArray.forEach(element => {\r\n    if (!bikes[id].dates.includes(element)) {\r\n      return false;\r\n    }\r\n  });\r\n\r\n  //Make the dates unavailable for the bike.\r\n  dateArray.forEach(element => {\r\n    if (bikes[id].dates.includes(element)) {\r\n      var index = bikes[id].dates.indexOf(element);\r\n      bikes[id].dates.splice(index, 1);\r\n    }\r\n  });\r\n  return true;\r\n}\r\n\r\nfunction DateToString(date) {\r\n  return date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();\r\n}\r\n\r\n/* Returns a new Date object for a specified number of days after the current date. */\r\nDate.prototype.addDays = function (days) {\r\n  var date = new Date(this.valueOf());\r\n  date.setDate(date.getDate() + days);\r\n  return date;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}